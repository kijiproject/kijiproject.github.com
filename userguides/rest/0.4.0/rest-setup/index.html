
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Setup</title>
    <meta name="description" content="Setup">
    <meta name="author" content="WibiData">
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/github.css" rel="stylesheet" type="text/css" media="all">
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
    <script src="/assets/themes/twitter/vallenato/vallenato.js" type="text/javascript"></script>
    <link rel="stylesheet" href="/assets/themes/twitter/css/vallenato.css" type="text/css" media="screen">
  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="http://www.kiji.org">Kiji Community</a>
          <ul class="nav">
            <li class="dropdown">
              <a href="http://www.kiji.org">The Kiji Project</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/features">Features</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="http://www.kiji.org/architecture">Architecture</a>
            </li>
            <li class="dropdown">
              <a href="http://www.kiji.org/getstarted/">Get Started</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Downloads">Downloads</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Installation">Installation</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Quick_Start_Guide">Quick Start Guide</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/get-started-with-maven">Getting Started with Maven</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Training_Services">
                    Training & Services
                  </a>
                </li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="http://www.kiji.org/getinvolved">Get Involved</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/getinvolved/#Mailing_Lists">Mailing Lists</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getinvolved/#Source_Code">Source Code</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getinvolved/#Issue_Tracker">Issue Tracking</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/getinvolved/#Contributing_to_Kiji">
                    Contributing to Kiji
                  </a>
                </li>
              </ul>
            </li>
            <li class="dropdown active">
              <a href="/">Documentation</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/getstarted/#Quick_Start_Guide">Quick Start Guide</a>
                </li>
                <li class="menu-item">
                  <a href="/tutorials.html">Tutorials</a>
                </li>
                <li class="menu-item">
                  <a href="/userguides.html">
                    User Guides
                  </a>
                </li>
                <li class="menu-item">
                  <a href="/apidocs">API Reference</a>
                </li>
                <li class="menu-item">
                  <a href="https://github.com/kijiproject/wiki/wiki">Wiki</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="http://www.kiji.org/blog/">Blog</a>
            </li>
            <li>
              <a href="http://www.kiji.org/aboutkiji">About Kiji</a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="content">
        
<div class="row-fluid">
  <div class="span9">
    <div class="page-header">
      <h1>Setup</h1>
    </div>

    <div class="pagination">
      <ul>
    
      
      
    
      

      
        
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
            
            
              <li class="prev">
                <a href="/userguides/rest/0.4.0/rest-overview" title="What is KijiREST?">
                &larr; Previous
                </a>
              </li>
            
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
      

      
      
        
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
              <li class="next">
                <a href="/userguides/rest/0.4.0/rest-resources" title="KijiREST Resources">
                Next &rarr;
                </a>
              </li>
            
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
      
      </ul>
    </div>

    <p>KijiREST runs as part of the Kiji environment. A BentoBox cluster includes KijiREST meaning nothing else needs to be downloaded &#8211; simply start the KijiREST server.</p>

<p>To run KijiREST on hardware independent of the HBase cluster, the KijiREST package includes the necessary Kiji libraries required to access the cluster remotely.</p>

<h2 id='setting_up_kijirest_on_a_local_server'>Setting up KijiREST on a local server</h2>

<p>To run KijiREST in a production environment, see <a href='#setup-production'>Setup and Run (Production)</a>.</p>

<h3 id='download_the_package'>Download the Package</h3>

<p>Skip this step if running from within a Kiji BentoBox.</p>

<p>The KijiREST tarball can be found on the Kiji <a href='http://www.kiji.org/getstarted/#Downloads'>Downloads</a> page. Unpacked, the KijiREST contents are:</p>

<pre><code>$ cd ~/kiji-rest-0.4.0
$ ls .</code></pre>
<dl>
<dt>  bin/ </dt>
    <dd>Contains start/stop scripts to control the KijiREST application</dd>
<dt>conf/ </dt>
    <dd>Basic KijiREST and Dropwizard configuration settings</dd>
<dt>docs/ </dt>
    <dd>API docs</dd>
<dt>lib/ </dt>
    <dd>A placeholder directory of additional classpath jars (especially Avro classes)</dd>
<dt>kiji-rest-0.4.0.jar  </dt>
    <dd>The KijiREST executable.</dd>
<dt>README.md  </dt>
    <dd> A terse version of this document.</dd>
</dl>
<h3 id='startup_with_basic_configuration'>Startup with Basic Configuration</h3>

<p>KijiREST configuration parameters are located in <code>kiji-rest/conf/configuration.yml</code>. This file is divided into two major sections:</p>

<ul>
<li>The top portion of the file contains configurations relevant to KijiREST</li>

<li>The bottom portion configures Dropwizard (including the HTTP and logging configurations).</li>
</ul>

<p>To configure and run KijiREST for your cluster and instance:</p>

<ol>
<li>
<p>Start HBase and Hadoop with a configured Kiji environment. Make sure necessary Avro classes are accessible either in <code>$KIJI_CLASSPATH</code> or in the <code>kiji-rest-0.4.0/lib/</code> directory.</p>

<p>If you are running a BentoBox, start Hadoop and HBase with <code>bento start</code>.</p>
</li>

<li>
<p>Set the cluster key to the URI of our Kiji environment, e.g. <code>kiji://.env</code>.</p>
</li>

<li>
<p>Set the instance key to the list of instances we would like to surface through the REST service, for example default, prod_instance, dev_instance:</p>

<pre><code>cluster: kiji://.env/
instances:
 - default
 - prod_instance
 - dev_instance</code></pre>
</li>

<li>
<p>Start KijiREST.</p>

<pre><code>~/kiji-rest-0.4.0$  ./bin/kiji-rest</code></pre>
</li>
</ol>

<p>The vanilla <code>configuration.yml</code> file sets up the REST service through port 8080 and writes all logs to the <code>kiji-rest/logs</code> directory. The process will run in the background.</p>

<p>You can find the process ID in the <code>kiji-rest.pid</code> file:</p>

<pre><code>~/kiji-rest-0.4.0$  cat kiji-rest.pid
1234</code></pre>

<h3 id='get_instance_status'>Get Instance Status</h3>

<p>You can check on the status of Kiji instances using Dropwizard&#8217;s healthcheck portal (default port: 8081).</p>

<pre><code>$ curl http://localhost:8081/healthcheck
* deadlocks: OK
* kiji://localhost:2182/default/: OK
* kiji://localhost:2182/dev_instance/: OK
* kiji://localhost:2182/prod_instance/: OK</code></pre>

<h3 id='logging'>Logging</h3>

<p>There are three types of logs in the logs directory:</p>

<pre><code>$  ls logs/</code></pre>
<dl>
<dt>app.log</dt>
    <dd>Contains Kiji client logs.</dd>
<dt>requests.log</dt>
    <dd>Contains HTTP logs.</dd>
<dt>console.out</dt>
    <dd>Any other logs which may have been sent to the console.</dd>
</dl>
<p>The logging options (console-logging, log files, syslog, archiving, etc.) are set in the Dropwizard section of <code>configuration.yml</code>. The available options and defaults are detailed in the <a href='http://dropwizard.codahale.com/manual/'>Dropwizard User Manual</a>.</p>
<a id='setup-production'> </a>
<h2 id='setup_and_run_production'>Setup and Run (Production)</h2>

<p>Installing KijiREST in a production environment has additional considerations beyond those described for development systems.</p>

<ol>
<li>
<p>Unpack the <code>kiji-rest</code> tarball as the <code>/opt/wibi/kiji-rest directory</code>:</p>

<pre><code> $ tar -xzf kiji-rest-0.4.0-release.tar.gz -C /opt/wibi/
 $ ln -s kiji-rest-0.4.0 kiji-rest</code></pre>

<p>The KijiREST package includes KijiSchema libraries need to be able to access Kiji tables.</p>
</li>

<li>
<p>Add the KijiREST user (with appropriately limited permissions) named &#8220;kiji&#8221;.</p>

<pre><code> $ sudo useradd kiji</code></pre>
</li>

<li>
<p>Move this script to <code>/etc/init.d/kiji-rest</code> and register it as a service with <code>chkconfig</code>.</p>

<pre><code> $ sudo cp /opt/wibi/kiji-rest/bin/kiji-rest.initd  /etc/init.d/kiji-rest
 $ chkconfig --add kiji-rest</code></pre>
</li>
</ol>

<p>To start the service, run:</p>

<pre><code>$ /sbin/service kiji-rest start</code></pre>

<p>To stop the service, run:</p>

<pre><code>$ /sbin/service kiji-rest stop</code></pre>

    <div class="pagination">
      <ul>
    
      
      
    
      

      
        
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
            
            
              <li class="prev">
                <a href="/userguides/rest/0.4.0/rest-overview" title="What is KijiREST?">
                &larr; Previous
                </a>
              </li>
            
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
      

      
      
        
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
              <li class="next">
                <a href="/userguides/rest/0.4.0/rest-resources" title="KijiREST Resources">
                Next &rarr;
                </a>
              </li>
            
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            
          
        
          
        
      
      </ul>
    </div>
  </div>

  <div class="span3">
    
      
      
    
    <div class="side-toc">
    <div class="side-toc-inner">
      <h3>KijiREST User Guide</h3>
      <ul>
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/userguides/rest/0.4.0/rest-overview">What is KijiREST?</a>
                  
                </li>
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
              
                <li>
                  
                    <b>Setup</b>
                  
                </li>
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/userguides/rest/0.4.0/rest-resources">KijiREST Resources</a>
                  
                </li>
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
                <li>
                  
                    <a href="/userguides/rest/0.4.0/rest-operations">KijiREST Operations</a>
                  
                </li>
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
            
          
            
              
            
          
            
              
                <li>
                  
                    <a href="/userguides/rest/0.4.0/rest-examples">KijiREST Examples</a>
                  
                </li>
              
            
          
            
              
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
      </ul>
      <h3>Need Help?</h3>
      <ul>
        <li>
      <a class="btn btn-info"  href="https://groups.google.com/a/kiji.org/forum/?fromgroups#!forum/user">User Group Mailing List</a>
        </li>
        <li>
      <a class="btn btn-warning" href="https://jira.kiji.org/secure/CreateIssueDetails!init.jspa?pid=10004&issuetype=1&priority=3&components=10010&summary=Reported%20Docs%20Error:%20Setup&description=Please%20describe%20the%20issue.%0a%0aurl:%20/userguides/rest/0.4.0/rest-setup"> Report an Error in Docs </a> 
        </li>
    </ul>
    </div>
</div>

  </div>
</div>


      </div>

      <footer>
        <hr/>
        <p>&copy; Kiji Community</p>
      </footer>
    </div>

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35866189-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>

