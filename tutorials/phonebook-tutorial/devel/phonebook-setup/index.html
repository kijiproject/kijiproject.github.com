
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Setup</title>
    <meta name="description" content="Setup and compile instructions for the phonebook tutorial.">
    <meta name="author" content="WibiData">
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter/css/github.css" rel="stylesheet" type="text/css" media="all">
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
    <script src="/assets/themes/twitter/vallenato/vallenato.js" type="text/javascript"></script>
    <link rel="stylesheet" href="/assets/themes/twitter/css/vallenato.css" type="text/css" media="screen">

  </head>

  <body>
    <div class="navbar navbar-fixed-top">
           
      <div class="navbar-inner">
                     
        <div class="container-fluid">
         <a class="brand" href="http://www.kiji.org">
           <img src="http://www.kiji.org/wp-content/themes/spark/timthumb/timthumb.php?src=http%3A%2F%2Fwww.kiji.org%2Fwp-content%2Fuploads%2F2014%2F03%2FKiji-Logo2.png&h=160&w=0&q=90" style="height: 50px;" alt="Kiji Project">
         </a>
          <ul class="nav pull-right">

            <li class="dropdown">
              <a href="http://www.kiji.org">Home</a>
            </li>
            <li>
              <a href="http://www.kiji.org/#about">About</a>
            </li>
            <li>
              <a href="http://www.kiji.org/#community">Community</a>
            </li>
            <li class="dropdown">
              <a href="/">Download</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://www.kiji.org/#download">Bento Box</a>
                </li>
                <li class="menu-item">
                  <a href="https://github.com/kijiproject">Github Source</a>
                </li>
              </ul>
            </li>
            <li>
            <li class="dropdown">
              <a href="/">Learn</a>
              <ul class="dropdown-menu">
                <li class="menu-item">
                  <a href="http://docs.kiji.org/">Documentation</a>
                </li>
                <li class="menu-item">
                  <a href="http://docs.kiji.org/apidocs/">Java Docs</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/category/presentation/">Presentations</a>
                </li>
                <li class="menu-item">
                  <a href="http://www.kiji.org/category/video/">Videos</a>
                </li>
              </ul>
            </li>
            <li>
              <a href="http://www.kiji.org/blog/">Blog</a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="content">
        
<div class="row-fluid">
  <div class="span9">
    <div class="page-header">
      <h1>Setup</h1>
    </div>

    <div class="pagination">
      <ul>
    
      
      
    
      

      
        
        
          
            
            
              <li class="prev">
                <a href="/tutorials/phonebook-tutorial/devel/phonebook-tutorial" title="Overview">
                &larr; Previous
                </a>
              </li>
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
      

      
      
        
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
              <li class="next">
                <a href="/tutorials/phonebook-tutorial/devel/phonebook-create" title="Create a Table">
                Next &rarr;
                </a>
              </li>
            
          
        
      
      </ul>
    </div>

    <p>For this tutorial, we assume you are either using the Kiji Standalone BentoBox or
have installed the individual components described <a href="http://www.kiji.org/getstarted/">here</a>.
If you don\'t have a working environment yet, you can install the Kiji
Standalone Bento box in <a href="http://www.kiji.org/#tryit">three quick steps!</a>.</p>

<h3>Using HBase or Cassandra as Kiji's backing store</h3>

<p>Kiji can create Kiji tables in HBase or Cassandra tables.  You can indicate to Kiji which you would
like to use in your Kiji URI.  The URI for an HBase Kiji table looks like:</p>

<pre><code>kiji://zookeeper-host:zookeeper-port/kiji-instance-name
</code></pre>

<p>The URI for a Cassandra Kiji, on the other hand, looks like:</p>

<pre><code>kiji-cassandra://zookeeper-host:zookeeper-port/cassandra-host:cassandra-port/kiji-instance-name
</code></pre>

<p>For more details, please see the Javadocs in the source for <code>org.kiji.schema.KijiURI</code> and
<code>org.kji.schema.cassandra.CassandraKijiURI</code>.</p>

<h3>Start a Kiji Cluster</h3>

<p>If you plan to use a BentoBox, run the following command to set BentoBox-related environment
variables and start the Bento cluster.  To start a Bento Box with HBase:</p>

<div class="userinput">

<div class="highlight"><pre><code class="bash"><span class="nb">cd</span> &lt;path/to/bento&gt;
<span class="nb">source </span>bin/kiji-env.sh
bento start
</code></pre></div>

</div>


<p>To start a Bento Box with Cassandra:</p>

<div class="userinput">

<div class="highlight"><pre><code class="bash"><span class="nb">cd</span> &lt;path/to/bento&gt;
<span class="nb">source </span>bin/kiji-env.sh
cassandra-bento start
</code></pre></div>

</div>


<p>After the BentoBox starts, it displays a list of useful ports for cluster webapps and services.  The
MapReduce JobTracker webapp (<a href="http://localhost:50030">http://localhost:50030</a> in particular will be
useful for this tutorial.</p>

<h3>Compiling</h3>

<p>If you have downloaded the Kiji Standalone BentoBox, the code for this tutorial
is already compiled and located in the <code>$KIJI_HOME/examples/phonebook/lib/</code> directory.
You can skip to the <a href="#ref.install_kiji_instance">Install Kiji Instance</a> section to
continue with the environment setup for playing with the example code.</p>

<p>The source code for this tutorial can be found in <code>$KIJI_HOME/examples/phonebook</code>.
The source is included along with a Maven project. To get started using Maven,
consult <a href="http://www.kiji.org/get-started-with-maven">Getting started With Maven</a> or
the <a href="http://maven.apache.org/">Apache Maven Homepage</a>.</p>

<p>The following tools are required to compile this project:</p>

<ul>
<li>Maven 3.x</li>
<li>Java 7</li>
</ul>


<p>To compile, run <code>mvn package</code> from <code>$KIJI_HOME/examples/phonebook</code>. The build
artifacts (jars) will be placed in the <code>$KIJI_HOME/examples/phonebook/target/</code>
directory. This tutorial assumes you are using the pre-built jars included with
the phonebook example under <code>$KIJI_HOME/examples/phonebook/lib/</code>. If you wish to
use jars of example code that you have built, you should adjust the command
lines in this tutorial to use the jars in <code>$KIJI_HOME/examples/phonebook/target/</code>.</p>

<p>If you are using the Bento Box, <code>kiji-env.sh</code> will have set <code>$KIJI_HOME</code> for you
already. If not, you should set that yourself in your environment:</p>

<div class="userinput">

<div class="highlight"><pre><code class="bash"><span class="nb">export </span><span class="nv">KIJI_HOME</span><span class="o">=</span>/path/to/kiji-schema
</code></pre></div>

</div>


<h3>Create a Kiji URI</h3>

<p>We refer to Kiji instances, Kiji tables, and even columns within a Kiji table with Kiji URIs.  Let's
define a Kiji URI for a new Kiji instance that we shall use for the rest of this tutorial.  If you
want to use HBase (and you started your BentoBox with the <code>bento start</code> command), define an
environment variable to contain a URI for an HBase-backed KIJI instance:</p>

<pre><code>export KIJI=kiji://localhost:2181/phonebook
</code></pre>

<p>If you want to use Cassandra (and you started your BentoBox with <code>cassandra-bento start</code>), instead
define your URI as follows:</p>

<pre><code>export KIJI=kiji-cassandra://localhost:2181/localhost:9042/phonebook
</code></pre>

<h3>Install Kiji Instance</h3>

<p><a name="ref.install_kiji_instance" id="ref.install_kiji_instance"> </a></p>

<p>Install your Kiji instance. Running <code>kiji install</code> with no <code>--kiji</code> flag installs the default instance:</p>

<div class="userinput">

<div class="highlight"><pre><code class="bash">kiji install --kiji<span class="o">=</span><span class="k">${</span><span class="nv">KIJI</span><span class="k">}</span>
</code></pre></div>

</div>


<h3>Setup Phonebook tutorial Environment</h3>

<p>To work through this tutorial, various Kiji tools will require that Avro data
type definitions particular to the working phonebook example be on the
classpath. You can add your artifacts to the Kiji classpath by running:</p>

<div class="userinput">

<div class="highlight"><pre><code class="bash"><span class="nb">export </span><span class="nv">KIJI_CLASSPATH</span><span class="o">=</span><span class="s2">&quot;$KIJI_HOME/examples/phonebook/lib/*&quot;</span>
</code></pre></div>

</div>





    <div class="pagination">
      <ul>
    
      
      
    
      

      
        
        
          
            
            
              <li class="prev">
                <a href="/tutorials/phonebook-tutorial/devel/phonebook-tutorial" title="Overview">
                &larr; Previous
                </a>
              </li>
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
      

      
      
        
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
              <li class="next">
                <a href="/tutorials/phonebook-tutorial/devel/phonebook-create" title="Create a Table">
                Next &rarr;
                </a>
              </li>
            
          
        
      
      </ul>
    </div>
  </div>

  <div class="span3">
    
      
      
    
    <div class="side-toc">
    <div class="side-toc-inner">
      <h3>Phonebook Tutorial</h3>
      <ul>
        
          
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/devel/phonebook-tutorial">Overview</a>
                  
                </li>
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
              
                <li>
                  
                    <b>Setup</b>
                  
                </li>
              
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/devel/phonebook-create">Create a Table</a>
                  
                </li>
              
            
          
        
          
          
            
          
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/devel/phonebook-point-add">Read and Write in Kiji</a>
                  
                </li>
              
            
          
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/devel/phonebook-import">Import Data</a>
                  
                </li>
              
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/devel/phonebook-derived-columns">Derive Data</a>
                  
                </li>
              
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/devel/phonebook-increment">Use Counters</a>
                  
                </li>
              
            
          
            
          
            
          
            
          
            
          
        
          
          
            
          
            
          
            
          
            
          
            
          
            
          
            
              
                <li>
                  
                    <a href="/tutorials/phonebook-tutorial/devel/phonebook-delete">Delete Contacts</a>
                  
                </li>
              
            
          
            
          
        
      </ul>
      <h3>Need Help?</h3>
      <ul>
        <li>
      <a class="btn btn-info"  href="https://groups.google.com/a/kiji.org/forum/?fromgroups#!forum/user">User Group Mailing List</a>
        </li>
        <li>
      <a class="btn btn-warning" href="https://jira.kiji.org/secure/CreateIssueDetails!init.jspa?pid=10004&issuetype=1&priority=3&components=10010&summary=Reported%20Docs%20Error:%20Setup&description=Please%20describe%20the%20issue.%0a%0aurl:%20/tutorials/phonebook-tutorial/devel/phonebook-setup"> Report an Error in Docs </a> 
        </li>
    </ul>
    </div>
</div>

  </div>
</div>


      </div>

      <footer>
        <hr/>
        <p>&copy; Kiji Community</p>
      </footer>
    </div>

    


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-REMOVED-DONT-COMMIT']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>

